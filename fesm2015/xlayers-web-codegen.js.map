{"version":3,"file":"xlayers-web-codegen.js","sources":["ng://@xlayers/web-codegen/lib/web-context.service.ts","ng://@xlayers/web-codegen/lib/web-parser.service.ts","ng://@xlayers/web-codegen/lib/web-aggregator.service.ts","ng://@xlayers/web-codegen/lib/web-codegen.service.ts","ng://@xlayers/web-codegen/lib/web-codegen.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { ImageService, LayerService, TextService } from '@xlayers/sketch-lib';\r\nimport { SvgCodeGenService } from '@xlayers/svg-codegen';\r\n\r\nimport { WebCodeGenContext } from './web-codegen.d';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WebContextService {\r\n  constructor(\r\n    private readonly layerService: LayerService,\r\n    private readonly textService: TextService,\r\n    private readonly imageService: ImageService,\r\n    private readonly svgCodeGen: SvgCodeGenService\r\n  ) {}\r\n\r\n  identify(current: SketchMSLayer) {\r\n    return (\r\n      this.imageService.identify(current) ||\r\n      this.textService.identify(current) ||\r\n      this.layerService.identify(current) ||\r\n      this.svgCodeGen.identify(current) ||\r\n      [\r\n        'oval',\r\n        'rect',\r\n        'rectangle',\r\n        'group',\r\n        'symbolMaster',\r\n        'shapeGroup'\r\n      ].includes(current._class as string)\r\n    );\r\n  }\r\n\r\n  of(current: SketchMSLayer) {\r\n    return (current as any).web;\r\n  }\r\n\r\n  put(current: SketchMSLayer, nextContext: WebCodeGenContext) {\r\n    (current as any).web = { ...this.of(current), ...nextContext };\r\n  }\r\n\r\n  clear(current: SketchMSLayer) {\r\n    delete (current as any).web;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CssCodeGenService } from '@xlayers/css-codegen';\r\nimport {\r\n  FormatService,\r\n  ImageService,\r\n  LayerService,\r\n  SymbolService\r\n} from '@xlayers/sketch-lib';\r\nimport { TextService } from '@xlayers/sketch-lib';\r\nimport { SvgCodeGenService } from '@xlayers/svg-codegen';\r\n\r\nimport { WebCodeGenOptions } from './web-codegen.d';\r\nimport { WebContextService } from './web-context.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WebParserService {\r\n  constructor(\r\n    private readonly textService: TextService,\r\n    private readonly formatService: FormatService,\r\n    private readonly symbolService: SymbolService,\r\n    private readonly imageService: ImageService,\r\n    private readonly layerService: LayerService,\r\n    private readonly cssCodeGen: CssCodeGenService,\r\n    private readonly svgCodeGen: SvgCodeGenService,\r\n    private readonly webContext: WebContextService\r\n  ) {}\r\n\r\n  compute(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    this.svgCodeGen.compute(current, data, options);\r\n    this.cssCodeGen.compute(current, data, options);\r\n    if (current._class === 'page') {\r\n      this.walk(current, data, options);\r\n    } else {\r\n      this.visit(current, data, options);\r\n    }\r\n  }\r\n\r\n  private walk(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    if (this.layerService.identify(current)) {\r\n      current.layers.forEach(layer => {\r\n        this.visit(layer, data, options);\r\n      });\r\n    } else if (this.symbolService.identify(current)) {\r\n      this.visitSymbol(current, data, options);\r\n    }\r\n  }\r\n\r\n  private visit(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    if (options.force) {\r\n      this.webContext.clear(current);\r\n    }\r\n    if (this.webContext.identify(current)) {\r\n      if (!this.webContext.of(current)) {\r\n        this.visitContent(current, options);\r\n      }\r\n    }\r\n    this.walk(current, data, options);\r\n  }\r\n\r\n  private visitContent(current: SketchMSLayer, options: WebCodeGenOptions) {\r\n    if (this.imageService.identify(current)) {\r\n      this.visitBitmap(current, options);\r\n    } else if (this.textService.identify(current)) {\r\n      this.visitText(current);\r\n    } else if (this.svgCodeGen.identify(current)) {\r\n      this.visitShape(current);\r\n    } else {\r\n      this.visitLayer(current, options);\r\n    }\r\n  }\r\n\r\n  private visitLayer(current: SketchMSLayer, options: WebCodeGenOptions) {\r\n    this.webContext.put(current, {\r\n      attributes: [\r\n        ...this.generateClassAttribute(current),\r\n        `role=\"${current._class}\"`,\r\n        `aria-label=\"${current.name}\"`\r\n      ]\r\n    });\r\n  }\r\n\r\n  private visitSymbol(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    const symbolMaster = this.symbolService.lookup(current, data);\r\n    if (symbolMaster) {\r\n      this.compute(symbolMaster, data, options);\r\n      const context = this.webContext.of(current);\r\n      this.webContext.put(current, {\r\n        components:\r\n          context && context.components\r\n            ? [...context.components, current.name]\r\n            : [current.name]\r\n      });\r\n    }\r\n  }\r\n\r\n  private visitBitmap(current: SketchMSLayer, options: WebCodeGenOptions) {\r\n    const fileName = this.formatService.normalizeName(current.name);\r\n    this.webContext.put(current, {\r\n      attributes: [\r\n        ...this.generateClassAttribute(current),\r\n        `role=\"${current._class}\"`,\r\n        `aria-label=\"${current.name}\"`,\r\n        `src=\"/${options.assetDir}/${fileName}.png\"`\r\n      ]\r\n    });\r\n  }\r\n\r\n  private visitText(current: SketchMSLayer) {\r\n    this.webContext.put(current, {\r\n      attributes: this.generateClassAttribute(current)\r\n    });\r\n  }\r\n\r\n  private visitShape(current: SketchMSLayer) {\r\n    this.webContext.put(current, {\r\n      attributes: this.generateClassAttribute(current)\r\n    });\r\n  }\r\n\r\n  private generateClassAttribute(current: SketchMSLayer) {\r\n    if (this.cssCodeGen.identify(current)) {\r\n      const className = this.cssCodeGen.context(current).className;\r\n      if (className) {\r\n        return [`class=\"${className}\"`];\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  FormatService,\r\n  SymbolService,\r\n  LayerService,\r\n  ImageService,\r\n  TextService\r\n} from '@xlayers/sketch-lib';\r\nimport { WebContextService } from './web-context.service';\r\nimport { WebCodeGenOptions } from './web-codegen';\r\nimport { CssCodeGenService } from '@xlayers/css-codegen';\r\nimport { SvgCodeGenService } from '@xlayers/svg-codegen';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WebAggregatorService {\r\n  constructor(\r\n    private readonly textService: TextService,\r\n    private readonly symbolService: SymbolService,\r\n    private readonly imageService: ImageService,\r\n    private readonly formatService: FormatService,\r\n    private readonly layerService: LayerService,\r\n    private readonly webContext: WebContextService,\r\n    private readonly cssCodeGen: CssCodeGenService,\r\n    private readonly svgCodeGen: SvgCodeGenService\r\n  ) { }\r\n\r\n  aggregate(current: SketchMSLayer, options: WebCodeGenOptions) {\r\n    const fileName = this.formatService.normalizeName(current.name);\r\n    return [\r\n      {\r\n        kind: 'web',\r\n        value: this.renderComponent(current, options),\r\n        language: 'html',\r\n        uri: `${options.componentDir}/${fileName}.html`\r\n      },\r\n      ...this.cssCodeGen.aggregate(current, options).map(file => ({\r\n        ...file,\r\n        kind: 'web'\r\n      }))\r\n    ];\r\n  }\r\n\r\n  private renderComponent(current: SketchMSLayer, options: WebCodeGenOptions) {\r\n    const template = [];\r\n\r\n    if (current._class === 'page') {\r\n      this.walk(current, template, 0, options);\r\n    } else {\r\n      this.visit(current, template, 0, options);\r\n    }\r\n\r\n    return template.join('\\n');\r\n  }\r\n\r\n  private walk(\r\n    current: SketchMSLayer,\r\n    template: string[],\r\n    indent: number,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    if (this.layerService.identify(current)) {\r\n      current.layers.forEach(layer => {\r\n        this.visit(layer, template, indent, options);\r\n      });\r\n    }\r\n  }\r\n\r\n  private visit(\r\n    current: SketchMSLayer,\r\n    template: string[],\r\n    indent: number,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    if (this.symbolService.identify(current)) {\r\n      this.visitSymbol(current, template, indent, options);\r\n    } else if (this.imageService.identify(current)) {\r\n      this.visitBitmap(current, template, indent, options);\r\n    } else if (this.textService.identify(current)) {\r\n      this.visitText(current, template, indent, options);\r\n    } else if (this.svgCodeGen.identify(current)) {\r\n      this.visitShape(current, template, indent, options);\r\n    } else if (this.webContext.identify(current)) {\r\n      this.visitLayer(current, template, indent, options);\r\n    }\r\n  }\r\n\r\n  private visitLayer(\r\n    current: SketchMSLayer,\r\n    template: string[],\r\n    indent: number,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    const openTag = this.renderAttributeTag(\r\n      current,\r\n      options.blockTagName,\r\n      options\r\n    );\r\n    const closeTag = `</${options.blockTagName}>`;\r\n\r\n    template.push(this.formatService.indent(indent, openTag));\r\n    this.walk(current, template, indent + 1, options);\r\n    template.push(this.formatService.indent(indent, closeTag));\r\n  }\r\n\r\n  private visitSymbol(\r\n    current: SketchMSLayer,\r\n    template: string[],\r\n    indent: number,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    const context = this.webContext.of(current);\r\n    if (context && context.components && context.components.lenght > 1) {\r\n      const tagName = options.jsx\r\n        ? this.formatService.className(current.name)\r\n        : `${options.xmlPrefix}${this.formatService.normalizeName(\r\n          current.name\r\n        )}`;\r\n      template.push(\r\n        this.formatService.indent(indent, `<${tagName}></${tagName}>`)\r\n      );\r\n    }\r\n  }\r\n\r\n  private visitBitmap(\r\n    current: SketchMSLayer,\r\n    template: string[],\r\n    indent: number,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    const attributes = this.webContext.of(current).attributes;\r\n    template.push(\r\n      this.formatService.indent(\r\n        indent,\r\n        [`<${options.bitmapTagName}`, ...attributes].join(' ') + ' />'\r\n      )\r\n    );\r\n  }\r\n\r\n  private visitText(\r\n    current: SketchMSLayer,\r\n    template: string[],\r\n    indent: number,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    template.push(\r\n      this.formatService.indent(\r\n        indent,\r\n        [\r\n          this.renderAttributeTag(current, options.textTagName, options),\r\n          this.textService.lookup(current),\r\n          `</${options.textTagName}>`\r\n        ].join('')\r\n      )\r\n    );\r\n  }\r\n\r\n  private visitShape(\r\n    current: SketchMSLayer,\r\n    template: string[],\r\n    indent: number,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    template.push(\r\n      this.formatService.indent(\r\n        indent,\r\n        this.renderAttributeTag(current, options.blockTagName, options)\r\n      )\r\n    );\r\n    template.push(\r\n      this.svgCodeGen\r\n        .aggregate(current, { xmlNamespace: false })\r\n        .map(file =>\r\n          file.value\r\n            .split('\\n')\r\n            .map(line => this.formatService.indent(indent + 1, line))\r\n            .join('\\n')\r\n        )\r\n        .join('\\n')\r\n    );\r\n    template.push(\r\n      this.formatService.indent(indent, `</${options.blockTagName}>`)\r\n    );\r\n  }\r\n\r\n  private renderAttributeTag(\r\n    current: SketchMSLayer,\r\n    tagName: string,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    const attributes = this.webContext.of(current).attributes;\r\n    if (options.jsx) {\r\n      const attributIndex = attributes.findIndex(attribute =>\r\n        attribute.startsWith('class=')\r\n      );\r\n      if (attributIndex > 0) {\r\n        attributes[attributIndex] = attributes[attributIndex].replace(\r\n          'class=',\r\n          'className='\r\n        );\r\n      }\r\n    }\r\n    return [`<${tagName}`, ...attributes].join(' ') + '>';\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { ImageService, SymbolService, LayerService } from '@xlayers/sketch-lib';\r\nimport { WebContextService } from './web-context.service';\r\nimport { WebParserService } from './web-parser.service';\r\nimport { WebAggregatorService } from './web-aggregator.service';\r\nimport { WebCodeGenOptions } from './web-codegen.d';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WebCodeGenService {\r\n  constructor(\r\n    private readonly symbolService: SymbolService,\r\n    private readonly imageService: ImageService,\r\n    private readonly webContext: WebContextService,\r\n    private readonly webParser: WebParserService,\r\n    private readonly webAggretatorService: WebAggregatorService,\r\n    private readonly layerService: LayerService\r\n  ) {}\r\n\r\n  compute(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options?: WebCodeGenOptions\r\n  ) {\r\n    this.webParser.compute(current, data, this.compileOptions(options));\r\n  }\r\n\r\n  aggregate(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options?: WebCodeGenOptions\r\n  ) {\r\n    return this.visit(current, data, this.compileOptions(options));\r\n  }\r\n\r\n  identify(current: SketchMSLayer) {\r\n    return this.webContext.identify(current);\r\n  }\r\n\r\n  context(current: SketchMSLayer) {\r\n    return this.webContext.of(current);\r\n  }\r\n\r\n  private visit(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options?: WebCodeGenOptions\r\n  ) {\r\n    return this.visitContent(current, data, options).concat(\r\n      this.webAggretatorService.aggregate(current, options)\r\n    );\r\n  }\r\n\r\n  private visitContent(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    if (this.layerService.identify(current)) {\r\n      return this.visitLayer(current, data, options);\r\n    } else if (this.symbolService.identify(current)) {\r\n      return this.visitSymbolMaster(current, data, options);\r\n    } else if (this.imageService.identify(current)) {\r\n      return this.imageService.aggregate(current, data, options);\r\n    }\r\n    return [];\r\n  }\r\n\r\n  private visitLayer(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    return this.layerService\r\n      .lookup(current)\r\n      .flatMap(layer => this.visitContent(layer, data, options));\r\n  }\r\n\r\n  private visitSymbolMaster(\r\n    current: SketchMSLayer,\r\n    data: SketchMSData,\r\n    options: WebCodeGenOptions\r\n  ) {\r\n    const symbolMaster = this.symbolService.lookup(current, data);\r\n    if (symbolMaster) {\r\n      return this.visit(symbolMaster, data, options);\r\n    }\r\n    return [];\r\n  }\r\n\r\n  private compileOptions(options: WebCodeGenOptions) {\r\n    return {\r\n      textTagName: 'span',\r\n      bitmapTagName: 'img',\r\n      blockTagName: 'div',\r\n      mode: 'web',\r\n      jsx: false,\r\n      xmlPrefix: 'xly-',\r\n      cssPrefix: 'xly_',\r\n      componentDir: 'components',\r\n      assetDir: 'assets',\r\n      ...options\r\n    };\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CssCodeGenModule } from '@xlayers/css-codegen';\r\nimport { SketchLibModule } from '@xlayers/sketch-lib';\r\nimport { SvgCodeGenModule } from '@xlayers/svg-codegen';\r\n\r\n@NgModule({\r\n  imports: [CssCodeGenModule, SvgCodeGenModule, SketchLibModule]\r\n})\r\nexport class WebCodeGenModule {}\r\n"],"names":[],"mappings":"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"}